import{s as I,_ as G}from"./index.6d8fab14.js";import{g as H}from"./menu.c17d1231.js";import{l as J,b as Q,m as d,r as i,n as W,o as c,c as p,p as X,e as m,a as l,w as o,F as x,q as P,g as _,t as U,s as L,d as $,f as T}from"./vendor.c1fe1bd0.js";import{_ as Y}from"./index.6eb935f0.js";function Z(f){return I({url:"/api/daily/getDailyMenu",method:"post",data:f})}function ee(){return I({url:"/api/dropDown/getDayMenuTypeList"})}function te(f){return I({url:"/api/daily/setDaily",method:"post",data:f})}const le={props:{select:{type:Array,required:!0,default(){return[]}}},emits:["update:select"],setup(f,{expose:D,emit:g}){const b=f,t=J({lists:[],currentPage:1,pageSize:10,total:0,loading:!0,isInit:!1}),v=Q({get:()=>b.select,set:u=>g("update:select",u)}),V=()=>{t.currentPage=1,t.isInit=!0,P(()=>{w.value.clearSelection(),t.isInit=!1}),r()},r=()=>{H({name:"",currentPage:t.currentPage,pageSize:t.pageSize}).then(u=>{const{list:a,pagination:{total:y}}=u;t.lists=a,t.total=y,P(()=>S()),t.loading=!1})},w=d(null),S=()=>{const u=v.value.map(a=>typeof a=="number"?a:a.id);t.lists.map(a=>{u.indexOf(a.id)!==-1&&(t.isInit=!0,w.value.toggleRowSelection(a,!0))})},M=u=>{if(console.log(t.isInit),t.isInit)return t.isInit=!1,!1;console.log(u),v.value=u},C=u=>u.id;return D({initData:V}),(u,a)=>{const y=i("el-table-column"),z=i("el-table"),s=W("loading");return c(),p(x,null,[X(l(z,{ref:(n,B)=>{B.table=n,w.value=n},data:m(t).lists,stripe:"",style:{width:"100%"},"row-key":C,onSelectionChange:M},{default:o(()=>[l(y,{type:"selection",width:"55","reserve-selection":!0}),l(y,{prop:"name",label:"\u98DF\u8C31\u540D\u79F0",width:"180",align:"center"})]),_:1},8,["data"]),[[s,m(t).loading]]),l(G,{page:m(t).currentPage,"onUpdate:page":a[0]||(a[0]=n=>m(t).currentPage=n),size:m(t).pageSize,"onUpdate:size":a[1]||(a[1]=n=>m(t).pageSize=n),total:m(t).total,onPagination:r},null,8,["page","size","total"])],64)}}};const ne={class:"home-container"},oe={class:"menu-container"},ae={class:"control clearfix"},se=T("\u9009\u62E9\u83DC\u5355"),ue={key:0,class:"menu-content"},ie={class:"menu-item"},re=T("\u70B9\u51FB\u9009\u62E9"),ce={class:"dialog-footer"},de=T("\u53D6\u6D88"),pe=T("\u786E\u5B9A"),_e={setup(f){const D=d(new Date(Date.now()-36e5*24)),g=d(!1),b=d([]),t=d([]),v=d(!1),V=d(null),r=d({day:"2021-12-11",dayMenuType:"",menus:[]}),w={},S=s=>{ElMessageBox.confirm("\u60A8\u786E\u5B9A\u8981\u53D6\u6D88\u6DFB\u52A0\u98DF\u6750\u5417\uFF1F",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88"}).then(()=>{s()}).catch(()=>{})},M=s=>{console.log(s)},C=()=>{g.value=!0},u=()=>{r.value.menus=r.value.menus.map(s=>s.id),te(r.value).then(s=>{a()})},a=()=>{Z({day:"2021-12-11"}).then(s=>(b.value=s,ee())).then(s=>{t.value=s})};a();const y=()=>{v.value=!0,P(()=>{V.value.initData()})},z=s=>{switch(s){case"Breakfast":return"\u65E9\u9910";case"Lunch":return"\u5348\u9910";default:return"\u665A\u9910"}};return(s,n)=>{const B=i("el-calendar"),R=i("el-col"),k=i("el-button"),q=i("el-empty"),E=i("el-row"),F=i("el-option"),A=i("el-select"),j=i("el-form-item"),K=i("el-badge"),O=i("el-form"),N=i("el-dialog");return c(),p(x,null,[_("div",ne,[l(E,{gutter:20},{default:o(()=>[l(R,{span:12},{default:o(()=>[l(B,{modelValue:D.value,"onUpdate:modelValue":n[0]||(n[0]=e=>D.value=e)},{dateCell:o(({data:e})=>[_("div",{onClick:M,style:{height:"100%",width:"100%"}},[_("p",null,U(e.date.getDate()),1)])]),_:1},8,["modelValue"])]),_:1}),l(R,{span:12},{default:o(()=>[_("div",oe,[_("div",ae,[l(k,{type:"primary",onClick:C},{default:o(()=>[se]),_:1})]),b.value.length>0?(c(),p("div",ue,[(c(!0),p(x,null,L(b.value,e=>(c(),p("div",{key:e.dayMenuType},[_("h3",null,U(z(e.dayMenuType)),1),_("div",ie,[(c(!0),p(x,null,L(e.menuList,h=>(c(),p("p",{key:h.id},U(h.name),1))),128))])]))),128))])):(c(),$(q,{key:1,description:"\u4ECA\u65E5\u6682\u65E0\u98DF\u8C31"}))])]),_:1})]),_:1})]),l(N,{modelValue:g.value,"onUpdate:modelValue":n[5]||(n[5]=e=>g.value=e),title:"\u9009\u62E9\u83DC\u5355","before-close":S},{default:o(()=>[l(O,{ref:(e,h)=>{h.formRef=e},model:r.value,rules:w,"label-width":"120px"},{default:o(()=>[l(j,{label:"\u7C7B\u578B",prop:"dayMenuType"},{default:o(()=>[l(A,{modelValue:r.value.dayMenuType,"onUpdate:modelValue":n[1]||(n[1]=e=>r.value.dayMenuType=e),placeholder:"\u8BF7\u9009\u62E9\u7C7B\u578B"},{default:o(()=>[(c(!0),p(x,null,L(t.value,e=>(c(),$(F,{key:e.id,label:e.text,value:e.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(j,{label:"\u98DF\u8C31",prop:"menus"},{default:o(()=>[l(K,{value:r.value.menus.length},{default:o(()=>[l(k,{type:"primary",onClick:y},{default:o(()=>[re]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["model"]),l(N,{modelValue:v.value,"onUpdate:modelValue":n[3]||(n[3]=e=>v.value=e),width:"50%",title:"\u9009\u62E9\u98DF\u8C31","append-to-body":""},{default:o(()=>[l(le,{ref:(e,h)=>{h.selectRef=e,V.value=e},select:r.value.menus,"onUpdate:select":n[2]||(n[2]=e=>r.value.menus=e)},null,8,["select"])]),_:1},8,["modelValue"])]),footer:o(()=>[_("span",ce,[l(k,{onClick:n[4]||(n[4]=e=>g.value=!1)},{default:o(()=>[de]),_:1}),l(k,{type:"primary",onClick:u},{default:o(()=>[pe]),_:1})])]),_:1},8,["modelValue"])],64)}}};var ye=Y(_e,[["__scopeId","data-v-2a6420e3"]]);export{ye as default};
